---
title: "golang的细节小问题"
date: 2021-03-25T21:00:48+08:00
lastmod: 2021-03-25T21:00:48+08:00
draft: false
keywords: ["",]
description: "golang 的一些细节小问题"
tags: ["",]
categories: [""]
author: "wtnyzhsq"
comment: false
toc: true
autoCollapseToc: false
postMetaInFooter: false
hiddenFromHomePage: false
contentCopyright: false
reward: false
mathjax: false
mathjaxEnableSingleDollar: false
mathjaxEnableAutoNumber: false
hideHeaderAndFooter: false
flowchartDiagrams:
  enable: false
  options: ""
sequenceDiagrams: 
  enable: false
  options: ""

---

 记录一些golang 的一些细节小问题

<!--more-->

* > golang可以给自定义的类型添加相应方法，注意必须是自定义类型。（如果直接给int添加method会报错 cannot define new methods on non-local type int  如果`type Interger int`定义别名就可以了，也就是需要是自定义的类型才能定义方法）。
   >

   

* > init函数可以在任何包中有0个或1个或多个； 执行顺序， 先导入包再->常量变量->init->main。 
   >

   

* > Main函数和init函数都没有参数和返回值的定义。
   >

   

* > switch中表达式可选。如空，相当于 switch true ，case表达式结果为true则执行； case中可包含多个表达式； Go中执行完一个case会立即退出switch，使用fallthrough语句可继续执行下一个case。
   >

   

* > go的runtime类似于java的虚拟机，负责内存分配、垃圾回收、栈处理、切片、反射、map等等，嵌入到每个可执行程序中。如.exe  （垃圾回收器-简单高效的  标记-清除回收器）
   >

   

* > 切片 ： [:]范围是0<=x<=cap
   >

   

* > 内存泄漏在编译阶段不能被发现，使用pprof包检测内存泄漏
   >

   

* > go语言中的++、--操作符都是后置操作符，必须跟在操作数后面，并且它们没有返回值，所以它们不能用于表达式。例如：i:=1  j=i++  --i（都错误）
   >

   

* > make只用来创建slice、map、channel。其中map使用前必须初始化。
   >

   

* > 两个接口拥有相同的方法列表即等价，可相互赋值。
  >

  

* > Go的数据类型：
  > 引用类型，默认值为nil（指针、slice、map、channel、interface、函数、方法等）；
  > 值类型（int系列、float系列、bool、string、数组和结构体）

  

* > 全局变量定义时必须带var。
  >

  

* > 类型转换语法：Type(expression)   类型断言语法为：Interface.(Type)
  >

  

* > nil channel代表channel未初始化，向未初始化的channel读写数据会造成永久阻塞。Ps.关闭(close)未初始化的channel会引起panic。给一个已经关闭的channel发送数据会引起panic。从一个已关闭的channel接收数据，缓冲区为空，则返回相关类型空值

*   